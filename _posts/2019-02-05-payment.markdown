---
layout:     post
title:      "支付系统设计"
subtitle:   " \"支付系统概述\""
date:       2019-02-05 11:00:00
author:     "xiaofeng"
header-img: "img/2020-03-css.jpeg"
tags:
    - 支付 
    - 技术
---

> 非支付公司的支付系统总结。因为工作原因，近几年一直都在和支付结算打交道，最近准备把这几年趟的坑整理记录一下。

    工作经历：2013年入职出行行业公司，16年入职保险类创业公司.在职期间负责过支付结算设计研发工作。
  

![](https://tva1.sinaimg.cn/large/00831rSTgy1gdec1b6os3j31hc0u0798.jpg)


**<u>基础技术服务支撑</u>**

1. 高性能。当时目标是日支持2000万单用车订单，用车服务高峰主要出现在早晚高峰（还有就是充返、秒杀等运营活动）。
2. 高可用。保证几个9的服务稳定性，尤其不能出现在早晚高峰不能出现用户订不了车，司机接不单的情况。
3. 可伸缩性。云服务+ansible+jekins实现能够快速扩容和无感知缩减服务


**<u>业务流程迭代</u>**

1. 服务安全。先说接口服务安全，全站https，对关键接口签名。
2. 可扩展性。满足灵活的业务需求。我的理解是要解耦，支付系统要满足几个场景，充/返、充/送、支付/送等几种场景。
3. 支付路由。这里涉及到扣款顺序的问题。还有的组合支付方式快速支持。
4. 多方结算问题。佣金配比，海量数据对账，结算冲正。
5. 对账。内部服务对账，订单和支付对账。和三方通道对账（任何一方服务不稳定导致数据不一致）
6. 服务监控。大额订单，环比数据暴增，订单和支付单位不一致。





